<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" href="../css/style.css" />
  
</head>
<body>
	
<div class="container_top">
<div id="left_top"></div>
<div id="middle_top">	
<h1><div class="post-title">wk Conditional Statements and Loops（条件语句和循环）</div></h1>
<p>awk 支持条件判断，控制程序流程。awk 的大部分条件判断语句很像C 语言的语法。</p>
<p>awk 支持下面三种if 语句</p>
<ul>
<li>单个if 语句</li>
<li>if-else 语句</li>
<li>多级if-elseif 语句</li>
</ul>
<h3>Simple If Statement（简单的if语句）</h3>
<p>Single Action （单个动作）-语法</p>
<div class="codeeara">
<ul>
<li>if (conditional-expression)</li>
<li>	action</li>
</ul>
</div>
<ul>
<li>if是关键词</li>
<li>conditional-expression是判断语句</li>
<li>action为执行的动作</li>
</ul>
<h3>Multiple Actions（多个动作）-语法</h3>
<div class="codeeara">
<ul>
<li>if (conditional-expression)</li>
<li>{</li>
<li>	action1;</li>
<li>	action2;</li>
<li>}</li>
</ul>
</div>
<p>例子</p>
<div class="codeeara">
<ul>
<li>$ awk -F "," \ '{ if ( ($4 >= 500 && $4 <= 1000) && ($5 <= 5)) \ print "Only",$5,"qty of",$2,"is available";}' items.txt</li>
<li>Only 2 qty of Refrigerator is available</li>
</ul>
</div>
<h3>If Else Statement</h3>
<p>语法：</p>
<div class="codeeara">
<ul>
<li>if (conditional-expression)</li>
<li>    action1</li>
<li>else</li>
<li>    action2</li>
</ul>
</div>
<p>三元操作符：</p>
<div class="codeeara">
conditional-expression ? action1 : action2 ;
</div>
<p>例</p>
<div class="codeeara">
<ul>
<li>$ cat if-ese.awk</li>
<li>BEGIN {</li>
<li>    FS=",";</li>
<li>}</li>
<li>{</li>
<li>    if($5 <= 5)</li>
<li>        print "Buy More:Order",$2,"immediately!"</li>
<li>    else</li>
<li>        print "Shell More:Give discount on", $2, "immediately!"</li>
<li>}</li>
</ul>
</div>
<p>$ awk 'ORS=NR%2? ",":"\n"' imtes.txt </p>
<p>$ awk '{if(NR%2==0) ORS="\n";else ORS=",";print}' items.txt</p>
<h3> while 循环</h3>
<p>while 循环结构-语法</p>
<ul>
<div class="codecontent">
<li>while (codition)</li>
<li>    Actions</li>
</div>
<li>&nbsp;</li>
<li>while 是awk 的关键字</li>
<li>condition 是条件表达式</li>
<li>actions 是循环体，如果有多语句，必须在{}中</li>
</ul>
<p>$ awk 'BEGIN {while(count++<50) string=string "x";print string}'</p>
<p>do-while 循环<br>语法：</p>
<div class="codeeara">
<ul>
<li>do</li>
<li>action</li>
<li>while(condition)</li>
</ul>
</div>
<h3>for 循环</h3>
<p>语法:</p>
<div class="codecontent">
<p>for(initialization;condition;increment/decrement)</p>
</div>
<p>echo "1 2 3 4" | awk '{for(i=1;i<=NF;i++) total+=i}END{print total}'</p>
<h3>break 语句</h3>
<p>break 语句用来跳出它所在的最内层的循环（while,do-while或 for 循环）,请注意：break
语句只有在循环中才能使用。</p>
<div class="codeeara">
<ul>
<li>$ cat break.awk</li>
<li>{</li>
<li>  i=2;total=0;</li>
<li>  while(i++<=NF)</li>
<li>  {</li>
<li>    if($i==0)</li>
<li>    {</li>
<li>      print "item",$0,"had a month without item sold!";</li>
<li>      break;</li>
<li>    }</li>
<li>  }</li>
<li>}</li>
</ul>
</div>
<h3>continue 语句</h3>
<p>continue 语句跳过后面剩余的循环部分，立即进入下次循环</p>
<h3>exit 语句</h3>
<p>exit 语句立即停止脚本的运行，并忽略脚本中其余的命令</p>
<div class="codecontent">
awk 'BEGIN{x=1;while(x<=10){if(x==5){x++;exit;}print "Value of x:",x;x++;}}'
<br>
	<br>
	<br>
</div>
</div>
</div>
</body>
</html>
